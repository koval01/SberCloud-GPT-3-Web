function format_result(start_, list_) {
  let result_list = [];
  list_ = list_.replies
  
  for (let i = 0; i < list_.length; i++) {
    result_list.push("<figure class=\"border-bottom\"><blockquote class=\"blockquote\"><b>"+start_+"</b><i>"+list_[i]+"</i></blockquote><figcaption class=\"blockquote-footer\">story.q-writer.com</figcaption></figure>");
  }
  return result_list;
}
function generate_continue() {
    const url = "https://neuro-server.q-writer.com/";
    const len_c = 60;
    const smp_c = 5;
    const button = $("#generate_continue_button"),
        loader = button.find("span");
    var txt_c = $("textarea").val();
  
    if (!txt_c.length) {
      txt_c = "Как-то раз";
      $("textarea").val(txt_c);
    }
  
    $.ajax({
      url: url,
      type: "POST",
      contentType: "application/json",
      data: JSON.stringify({
        prompt: txt_c,
        length: len_c,
        num_samples: smp_c,
      }),
      beforeSend: function () {
        loader.css("display", "inline-block");
        button.prop('disabled', true);
      },
      success: function (o) {
        let block = $("#result_continue_block");
        loader.css("display", "none");
        button.prop('disabled', false);
        block.empty(), block.append(format_result(txt_c, o));
      },
      error: function () {
        loader.css("display", "none");
        button.prop('disabled', false);
        alert("Извините, но произошла ошибка...");
      },
    });
}
